<!DOCTYPE html>
<html>
<head>
    <title>Test Course Player - Tabs & Features</title>
    <style>
        body { font-family: Arial; padding: 20px; background: #f5f5f5; }
        .test-section { background: white; padding: 20px; margin: 20px 0; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .status { padding: 10px; border-radius: 4px; margin: 10px 0; }
        .pass { background: #d4edda; color: #155724; }
        .fail { background: #f8d7da; color: #721c24; }
        .info { background: #d1ecf1; color: #0c5460; }
        button { padding: 10px 20px; margin: 5px; cursor: pointer; border: none; border-radius: 4px; background: #007bff; color: white; }
        button:hover { background: #0056b3; }
    </style>
</head>
<body>
    <h1>Course Player Tab & Feature Test</h1>
    
    <div class="test-section">
        <h2>âœ… Test Checklist</h2>
        <div id="results"></div>
    </div>

    <div class="test-section">
        <h2>ðŸ§ª Manual Tests</h2>
        <button onclick="testTabSwitching()">Test Tab Switching</button>
        <button onclick="testTutorInput()">Test AI Tutor Input</button>
        <button onclick="testCameraButton()">Test Camera Button</button>
        <button onclick="testLabContent()">Test Lab Content</button>
    </div>

    <div class="test-section">
        <h2>ðŸ“‹ Test Results</h2>
        <div id="test-results"></div>
    </div>

    <script>
        const results = document.getElementById('results');
        const testResults = document.getElementById('test-results');

        function addResult(name, passed, message) {
            const div = document.createElement('div');
            div.className = `status ${passed ? 'pass' : 'fail'}`;
            div.innerHTML = `<strong>${passed ? 'âœ“' : 'âœ—'} ${name}</strong><br/>${message}`;
            results.appendChild(div);
        }

        function addTestResult(name, passed, message) {
            const div = document.createElement('div');
            div.className = `status ${passed ? 'pass' : 'fail'}`;
            div.innerHTML = `<strong>${passed ? 'âœ“' : 'âœ—'} ${name}</strong><br/>${message}`;
            testResults.appendChild(div);
        }

        // Perform automatic checks
        window.onload = function() {
            // Check 1: Verify API_BASE_URL is set
            const hasApiBase = typeof API_BASE_URL !== 'undefined';
            addResult('API_BASE_URL', hasApiBase, hasApiBase ? 'API_BASE_URL is defined' : 'API_BASE_URL is missing');

            // Check 2: Verify Mistral functions exist
            const hasSummarize = typeof summarizeWithMistral === 'function';
            addResult('Mistral Summarize', hasSummarize, hasSummarize ? 'summarizeWithMistral() exists' : 'Function is missing');

            // Check 3: Verify download function exists
            const hasDownload = typeof downloadNotes === 'function';
            addResult('Download Notes', hasDownload, hasDownload ? 'downloadNotes() exists' : 'Function is missing');

            // Check 4: Verify openCoursePlayer exists
            const hasPlayer = typeof openCoursePlayer === 'function';
            addResult('Course Player', hasPlayer, hasPlayer ? 'openCoursePlayer() exists' : 'Function is missing');
        };

        function testTabSwitching() {
            testResults.innerHTML = '';
            addTestResult('Tab Elements', true, 'âœ“ Ready to test tab switching in course player');
            addTestResult('Notes', 'Will test when player loads with module data');
            addTestResult('Lab', 'Click Lab tab to see exercises');
            addTestResult('AI Tutor', 'Type a question and click Send Question');
            addTestResult('Camera', 'Click Enable Camera to start monitoring');
        }

        function testTutorInput() {
            testResults.innerHTML = '';
            addTestResult('Tutor Input', true, 'âœ“ Type your question in the AI Tutor tab');
            addTestResult('Question Format', true, 'Any question about the current module');
            addTestResult('Example', true, '"What is the main concept?" or "How do I solve this?"');
            addTestResult('Response', true, 'AI will respond using Mistral API');
        }

        function testCameraButton() {
            testResults.innerHTML = '';
            addTestResult('Camera Permission', true, 'Browser will ask for permission when clicked');
            addTestResult('Allow Access', true, 'Click "Allow" in the browser permission dialog');
            addTestResult('Camera Status', true, 'Status will change to "Camera Active"');
            addTestResult('Analytics', true, 'Study metrics will be tracked');
        }

        function testLabContent() {
            testResults.innerHTML = '';
            addTestResult('Lab Exercises', true, 'âœ“ Three challenges available:');
            addTestResult('Challenge 1', true, '1. Create a Function - Write a function that sums two numbers');
            addTestResult('Challenge 2', true, '2. Debug the Code - Find and fix the bug');
            addTestResult('Challenge 3', true, '3. Test Your Skills - Answer 5 questions about the module');
        }
    </script>
</body>
</html>
